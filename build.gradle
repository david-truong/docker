allprojects {
	ext {
		dockerRepo = 'david-truong-docker-registry.bintray.io'
	}

	task clean(dependsOn: ['cleanImages', 'cleanVolumes'])

	task cleanImages (description: "delete all untagged images", type: Exec) {
		commandLine 'cmd', '/c', 'docker images -q --filter "dangling=true" | xargs docker rmi'
		commandLine 'bash', '-c', 'docker images -q --filter "dangling=true" | xargs docker rmi'
	}

	task cleanVolumes (description: "clean volumes", type: Exec) {
		commandLine 'cmd', '/c', 'docker volume ls -qf dangling=true | xargs docker volume rm'
		commandLine 'bash', '-c', 'docker volume ls -qf dangling=true | xargs docker volume rm'
	}

	task images (description: "delete all untagged images", type: Exec) {
		commandLine 'cmd', '/c', 'docker images'
		commandLine 'bash', '-c', 'docker images'
	}
}
